# Hack Club AI CLI - é–‹ç™ºTODO

> ä»Šæ—¥ä¸­ã«å®Œæˆã•ã›ã‚‹ï¼ ğŸ’ª

---

## ğŸ“Š ç¾åœ¨ã®é€²æ—çŠ¶æ³

### âœ… å®Œäº†æ¸ˆã¿
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æ§‹é€ ï¼ˆBun + TypeScript + Inkï¼‰
- [x] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç† (`settings.json`, `chats.json`)
- [x] DB ã‚¯ãƒ©ã‚¹ï¼ˆlowdb ã‚’ä½¿ç”¨ï¼‰
- [x] AI ã‚¯ãƒ©ã‚¹åŸºæœ¬æ§‹é€ 
- [x] `getModels` API å®Ÿè£…
- [x] `getStats` API å®Ÿè£…
- [x] `generateImage` API å®Ÿè£…ï¼ˆåŸºæœ¬ï¼‰
- [x] Hero ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆãƒ¬ã‚¤ãƒ³ãƒœãƒ¼ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- [x] åˆæœŸåŒ–å‡¦ç† (`init`, `update`)
- [x] ãƒ­ã‚°ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

---

## ğŸ”´ å„ªå…ˆåº¦: é«˜ï¼ˆã‚³ã‚¢æ©Ÿèƒ½ï¼‰

### 1. Chat Completions API å®Ÿè£…
- [ ] `src/lib/ai/methods/chat.ts` ä½œæˆ
  - [ ] åŸºæœ¬ãƒãƒ£ãƒƒãƒˆé€ä¿¡æ©Ÿèƒ½
  - [ ] ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¯¾å¿œ
  - [ ] ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¯¾å¿œ
  - [ ] ä¼šè©±å±¥æ­´ã®é€ä¿¡
- [ ] å‹å®šç¾©ã®ä¿®æ­£ (`chatCompletions.types.ts`)
  - [ ] `message` â†’ `messages` ã®ä¿®æ­£ï¼ˆAPIä»•æ§˜ã«åˆã‚ã›ã‚‹ï¼‰
  - [ ] ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹è¿½åŠ 

### 2. Responses API å®Ÿè£…
- [ ] `src/lib/ai/methods/responses.ts` ä½œæˆ
  - [ ] ã‚·ãƒ³ãƒ—ãƒ«ãª string input
  - [ ] æ§‹é€ åŒ–ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ input
  - [ ] ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ
  - [ ] ãƒãƒ«ãƒã‚¿ãƒ¼ãƒ³ä¼šè©±å¯¾å¿œ
- [ ] å‹å®šç¾© (`responsibleConversations.types.ts` æ›´æ–°)

### 3. ãƒ¡ã‚¤ãƒ³ãƒãƒ£ãƒƒãƒˆ UI
- [ ] `src/app/components/chat/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
  - [ ] `ChatContainer.tsx` - ãƒãƒ£ãƒƒãƒˆç”»é¢å…¨ä½“ã®ã‚³ãƒ³ãƒ†ãƒŠ
  - [ ] `MessageList.tsx` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§è¡¨ç¤º
  - [ ] `MessageBubble.tsx` - å€‹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  - [ ] `InputBox.tsx` - ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„
  - [ ] `StatusBar.tsx` - ãƒ¢ãƒ‡ãƒ«åãƒ»ãƒˆãƒ¼ã‚¯ãƒ³æ•°è¡¨ç¤º
  - [ ] `CommandsHelp.tsx` - ã‚³ãƒãƒ³ãƒ‰ãƒ˜ãƒ«ãƒ—è¡¨ç¤º

### 4. ä¼šè©±å±¥æ­´ç®¡ç†
- [ ] `Chat` å‹ã® `messages` å®šç¾©ã‚’å®Œæˆ
- [ ] `Chats` ã‚¯ãƒ©ã‚¹ã«ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
  - [ ] `create(title?: string)` - æ–°è¦ä¼šè©±ä½œæˆ
  - [ ] `get(id: string)` - ä¼šè©±å–å¾—
  - [ ] `addMessage(chatId, message)` - ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ 
  - [ ] `delete(id: string)` - ä¼šè©±å‰Šé™¤
  - [ ] `list()` - ä¼šè©±ä¸€è¦§å–å¾—
  - [ ] `rename(id, title)` - ã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›´
  - [ ] `toggleStar(id)` - ãŠæ°—ã«å…¥ã‚Šåˆ‡æ›¿

---

## ğŸŸ  å„ªå…ˆåº¦: ä¸­ï¼ˆã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ï¼‰

### 5. ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…
- [ ] `src/lib/commands/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
  - [ ] `parser.ts` - ã‚³ãƒãƒ³ãƒ‰è§£æ
  - [ ] `executor.ts` - ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ

### 6. ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ (`/`)
- [ ] `/chats` - ä¼šè©±ä¸€è¦§ãƒ»ç®¡ç†
  - [ ] ä¸€è¦§è¡¨ç¤ºï¼ˆãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
  - [ ] æ¤œç´¢æ©Ÿèƒ½ (`f`)
  - [ ] ä¼šè©±å¾©å…ƒ (`Enter`)
  - [ ] ãŠæ°—ã«å…¥ã‚Šåˆ‡æ›¿ (`s`)
  - [ ] å‰Šé™¤ (`d d`)
  - [ ] ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ (`e`)
  - [ ] ã‚¿ã‚¤ãƒˆãƒ«ç·¨é›† (`F2`)
  - [ ] `/chats new` - æ–°è¦ä¼šè©±
- [ ] `/models` - ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ãƒ»é¸æŠ
  - [ ] ä¸€è¦§è¡¨ç¤º
  - [ ] æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ (`#type:chat`)
  - [ ] ãƒ¢ãƒ‡ãƒ«é¸æŠ (`Enter`)
  - [ ] ãŠæ°—ã«å…¥ã‚Šåˆ‡æ›¿ (`s`)
  - [ ] å½¹å‰²è¨­å®š (`r`)
- [ ] `/stats` - çµ±è¨ˆæƒ…å ±è¡¨ç¤º
- [ ] `/help` - ãƒ˜ãƒ«ãƒ—è¡¨ç¤º
- [ ] `/about` - ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
- [ ] `/quit` - çµ‚äº†

### 7. At ã‚³ãƒãƒ³ãƒ‰ (`@`)
- [ ] `src/lib/commands/at.ts` ä½œæˆ
  - [ ] ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹è§£æ
  - [ ] ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹èª­ã¿è¾¼ã¿
  - [ ] ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ
  - [ ] éš ã—ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒã‚¤ãƒŠãƒªé™¤å¤–

### 8. Slarah ã‚³ãƒãƒ³ãƒ‰ (`#`)
- [ ] `#imageGenerate` - ç”»åƒç”Ÿæˆãƒ¢ãƒ¼ãƒ‰
  - [ ] ç”»åƒç”Ÿæˆãƒ¢ãƒ‡ãƒ«ã¸ã®åˆ‡ã‚Šæ›¿ãˆ
  - [ ] `modalities: ["image", "text"]` è‡ªå‹•è¨­å®š
  - [ ] ã‚¢ã‚¹ãƒšã‚¯ãƒˆæ¯”é¸æŠ UI
  - [ ] Base64 ç”»åƒã®ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜

---

## ğŸŸ¡ å„ªå…ˆåº¦: ä½ï¼ˆè¿½åŠ æ©Ÿèƒ½ï¼‰

### 9. ç”»åƒç”Ÿæˆæ©Ÿèƒ½å¼·åŒ–
- [ ] `generateImage.ts` ã®æ›´æ–°
  - [ ] `image_config.aspect_ratio` å¯¾å¿œ
  - [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã® Base64 ç”»åƒå‡¦ç†
  - [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ©Ÿèƒ½
- [ ] ç”»åƒç”Ÿæˆ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 10. ç”»åƒå…¥åŠ›æ©Ÿèƒ½ï¼ˆVisionï¼‰
- [ ] `src/lib/ai/methods/vision.ts` ä½œæˆ
  - [ ] URL ç”»åƒå…¥åŠ›
  - [ ] Base64 ç”»åƒå…¥åŠ›
  - [ ] ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿

### 11. ãã®ä»– API å®Ÿè£…
- [ ] Embeddings APIï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- [ ] Moderations APIï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- [ ] OCR APIï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- [ ] PDF å…¥åŠ›ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

### 12. è‡ªå‹•ã‚¿ã‚¤ãƒˆãƒ«ç”Ÿæˆ
- [ ] `src/lib/ai/methods/titling.ts` ä½œæˆ
  - [ ] config ã® `TITLING` è¨­å®šã‚’ä½¿ç”¨
  - [ ] ä¼šè©±ã®æœ€åˆ2ä»¶ + æœ€å¾Œ3ä»¶ã‹ã‚‰ã‚¿ã‚¤ãƒˆãƒ«ç”Ÿæˆ

### 13. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
- [ ] API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ (429 ã‚¨ãƒ©ãƒ¼)
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼å¯¾å¿œ
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼è¡¨ç¤º

### 14. è¨­å®šç®¡ç† UI
- [ ] Settings ã‚¯ãƒ©ã‚¹ã® getter ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
- [ ] è¨­å®šè¡¨ç¤ºãƒ»ç·¨é›†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### 15. å˜ä½“ãƒ†ã‚¹ãƒˆ
- [ ] `lib.ai.test.ts` å®Œæˆ
  - [ ] getModels ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼
  - [ ] getStats ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼
  - [ ] chat æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- [ ] `lib.db.test.ts` å®Œæˆ
- [ ] `lib.util.test.ts` å®Œæˆ
- [ ] ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ†ã‚¹ãƒˆ

---

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ ï¼ˆå®Œæˆäºˆæƒ³ï¼‰

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ app.tsx
â”‚   â””â”€â”€ components/
â”‚       â”œâ”€â”€ hero.tsx âœ…
â”‚       â”œâ”€â”€ label.tsx âœ…
â”‚       â”œâ”€â”€ chat/
â”‚       â”‚   â”œâ”€â”€ ChatContainer.tsx
â”‚       â”‚   â”œâ”€â”€ MessageList.tsx
â”‚       â”‚   â”œâ”€â”€ MessageBubble.tsx
â”‚       â”‚   â”œâ”€â”€ InputBox.tsx
â”‚       â”‚   â”œâ”€â”€ StatusBar.tsx
â”‚       â”‚   â””â”€â”€ CommandsHelp.tsx
â”‚       â”œâ”€â”€ commands/
â”‚       â”‚   â”œâ”€â”€ ChatsView.tsx
â”‚       â”‚   â”œâ”€â”€ ModelsView.tsx
â”‚       â”‚   â”œâ”€â”€ StatsView.tsx
â”‚       â”‚   â””â”€â”€ HelpView.tsx
â”‚       â””â”€â”€ common/
â”‚           â”œâ”€â”€ Table.tsx
â”‚           â”œâ”€â”€ SearchBox.tsx
â”‚           â””â”€â”€ Dialog.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”œâ”€â”€ ai.ts âœ…
â”‚   â”‚   â””â”€â”€ methods/
â”‚   â”‚       â”œâ”€â”€ getModels.ts âœ…
â”‚   â”‚       â”œâ”€â”€ getStats.ts âœ…
â”‚   â”‚       â”œâ”€â”€ generateImage.ts âœ…
â”‚   â”‚       â”œâ”€â”€ chat.ts          â† æ–°è¦
â”‚   â”‚       â”œâ”€â”€ responses.ts     â† æ–°è¦
â”‚   â”‚       â”œâ”€â”€ vision.ts        â† æ–°è¦
â”‚   â”‚       â””â”€â”€ titling.ts       â† æ–°è¦
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ db.ts âœ…
â”‚   â”‚   â””â”€â”€ methods/
â”‚   â”‚       â”œâ”€â”€ settings.ts âœ…
â”‚   â”‚       â””â”€â”€ chats.ts âœ…ï¼ˆè¦æ‹¡å¼µï¼‰
â”‚   â”œâ”€â”€ commands/               â† æ–°è¦
â”‚   â”‚   â”œâ”€â”€ parser.ts
â”‚   â”‚   â”œâ”€â”€ executor.ts
â”‚   â”‚   â”œâ”€â”€ slash.ts
â”‚   â”‚   â””â”€â”€ at.ts
â”‚   â”œâ”€â”€ util/
â”‚   â”‚   â”œâ”€â”€ util.ts âœ…
â”‚   â”‚   â””â”€â”€ methods/
â”‚   â”‚       â”œâ”€â”€ init.ts âœ…
â”‚   â”‚       â””â”€â”€ update.ts âœ…
â”‚   â””â”€â”€ log.ts âœ…
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ ai/ âœ…
â”‚   â”œâ”€â”€ db/ âœ…
â”‚   â”œâ”€â”€ components/
â”‚   â””â”€â”€ commands/              â† æ–°è¦
â””â”€â”€ config.ts âœ…
```

---

## â° ä½œæ¥­é †åºï¼ˆæ¨å¥¨ï¼‰

1. **Chat API å®Ÿè£…** â†’ ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½
2. **ãƒãƒ£ãƒƒãƒˆ UI** â†’ å®Ÿéš›ã«å‹•ãã‚‚ã®ã‚’ç¢ºèª
3. **ä¼šè©±å±¥æ­´ç®¡ç†** â†’ æ°¸ç¶šåŒ–
4. **ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¼ã‚µãƒ¼** â†’ `/` `@` `#` ã‚³ãƒãƒ³ãƒ‰
5. **å„ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰** â†’ é †æ¬¡å®Ÿè£…
6. **ç”»åƒç”Ÿæˆå¼·åŒ–** â†’ `#imageGenerate` ã¨é€£æº
7. **ãƒ†ã‚¹ãƒˆ** â†’ å®‰å®šæ€§ç¢ºä¿

---

## ğŸ“ ãƒ¡ãƒ¢

- API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ:
  - Chat Completions: `POST /proxy/v1/chat/completions`
  - Responses API: `POST /proxy/v1/responses`
  - ç”»åƒç”Ÿæˆ: Chat Completions + `modalities: ["image", "text"]`
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™: 450 req / 30 min (Chat, Embeddings)
- èªè¨¼: `Authorization: Bearer YOUR_API_KEY`
